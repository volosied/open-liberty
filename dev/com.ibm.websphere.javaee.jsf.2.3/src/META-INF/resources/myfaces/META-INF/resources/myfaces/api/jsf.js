if("undefined"!=typeof OpenAjax&&("undefined"==typeof jsf||null==typeof jsf)){OpenAjax.hub.registerLibrary("jsf","www.sun.com","1.0",null);}if(!window.jsf){var jsf=new function(){this.specversion=220000;this.implversion=0;this.separatorchar=A();this.getProjectStage=function(){var B=myfaces._impl.core._Runtime.getGlobalConfig("jsfAjaxImpl",myfaces._impl.core.Impl);return B.getProjectStage();};this.getViewState=function(C){var B=myfaces._impl.core._Runtime.getGlobalConfig("jsfAjaxImpl",myfaces._impl.core.Impl);return B.getViewState(C);};this.getClientWindow=function(){var B=myfaces._impl.core._Runtime.getGlobalConfig("jsfAjaxImpl",myfaces._impl.core.Impl);return(arguments.length)?B.getClientWindow(arguments[0]):B.getClientWindow();};function A(){var B=myfaces._impl.core._Runtime.getGlobalConfig("jsfAjaxImpl",myfaces._impl.core.Impl);return B.getSeparatorChar();}};window.jsf=jsf;}if(!jsf.ajax){jsf.ajax=new function(){this.request=function(C,D,B){if(!B){B={};}var A=myfaces._impl.core._Runtime.getGlobalConfig("jsfAjaxImpl",myfaces._impl.core.Impl);return A.request(C,D,B);};this.addOnError=function(B){var A=myfaces._impl.core._Runtime.getGlobalConfig("jsfAjaxImpl",myfaces._impl.core.Impl);return A.addOnError(B);};this.addOnEvent=function(B){var A=myfaces._impl.core._Runtime.getGlobalConfig("jsfAjaxImpl",myfaces._impl.core.Impl);return A.addOnEvent(B);};this.response=function(C,B){var A=myfaces._impl.core._Runtime.getGlobalConfig("jsfAjaxImpl",myfaces._impl.core.Impl);return A.response(C,B);};};}if(!jsf.util){jsf.util=new function(){this.chain=function(C,B){var A=myfaces._impl.core._Runtime.getGlobalConfig("jsfAjaxImpl",myfaces._impl.core.Impl);return A.chain.apply(A,arguments);};};}if(!jsf.push){jsf.push=new function(){var C=window.location.protocol.replace("http","ws")+"//";var H=500;var D=25;var K="Expired";var I={};var G={};var F={};var M={};function B(Q,P,R){var N;var S=0;var O=this;O.open=function(){if(N&&N.readyState==1){return ;}N=new WebSocket(P);N.onopen=function(U){if(!S){var V=F[Q];for(var T=V.length-1;T>=0;T--){var W=V[T];G[W]["onopen"](R);}}S=0;};N.onmessage=function(X){var W=JSON.parse(X.data);for(var V=F[Q].length-1;V>=0;V--){var a=F[Q][V];if(document.getElementById(a)){try{G[a]["onmessage"](W,R,X);}catch(Z){}var T=G[a]["behaviors"];var Y=T[W];if(Y&&Y.length){for(var U=0;U<Y.length;U++){try{Y[U](null);}catch(Z){}}}}else{F[Q].splice(V,1);}}if(F[Q].length==0){O.close();}};N.onclose=function(U){if(!N||(U.code==1000&&U.reason==K)||(U.code==1008)||(!S)||(S>=D)){var V=F[Q];for(var T=V.length-1;T>=0;T--){var W=V[T];G[W]["onclose"](U.code,R,U);}}else{setTimeout(O.open,H*S++);}};};O.close=function(){if(N){var T=N;N=null;T.close();}};}var L=this;this.init=function(O,P,R,U,Q,T,S,N){T=J(T);if(!window.WebSocket){T(-1,R);return ;}var V=P.substr(P.indexOf("?")+1);if(!G[O]){G[O]={"channelToken":V,"onopen":J(U),"onmessage":J(Q),"onclose":T,"behaviors":S,"autoconnect":N};if(!F[V]){F[V]=[];}F[V].push(O);if(!I[V]){I[V]=new B(V,A(P),R);}}if(N){L.open(O);}};this.open=function(N){E(G[N]["channelToken"]).open();};this.close=function(N){E(G[N]["channelToken"]).close();};function A(N){if(N.indexOf("://")<0){var O=window.location.hostname+":"+window.location.port;return C+O+N;}else{return N;}}function E(O){var N=I[O];if(N){return N;}else{throw new Error("Unknown channelToken: "+O);}}function J(N){return(typeof N!=="function")&&(N=window[N]||function(){}),N;}};}